import{_ as r,C as n,o as t,c as s,a0 as o,b as l,w as i,a as d,E as c,a1 as p}from"./chunks/framework.B3sz4m_N.js";const A=JSON.parse('{"title":"PR Review (AI-Augmented)","description":"First-pass PR review with Bionic — diff-only, no merge rights, guardrails and KPIs.","frontmatter":{"title":"PR Review (AI-Augmented)","description":"First-pass PR review with Bionic — diff-only, no merge rights, guardrails and KPIs."},"headers":[],"relativePath":"reports/ai-augmented-dev-pipeline/02-pr-review.md","filePath":"reports/ai-augmented-dev-pipeline/02-pr-review.md"}'),u={name:"reports/ai-augmented-dev-pipeline/02-pr-review.md"};function m(h,e,g,f,b,P){const a=n("Mermaid");return t(),s("div",null,[e[1]||(e[1]=o('<h1 id="pr-review-ai-augmented" tabindex="-1">PR Review (AI-Augmented) <a class="header-anchor" href="#pr-review-ai-augmented" aria-label="Permalink to &quot;PR Review (AI-Augmented)&quot;">​</a></h1><h2 id="_1-problem-context" tabindex="-1">1. Problem Context <a class="header-anchor" href="#_1-problem-context" aria-label="Permalink to &quot;1. Problem Context&quot;">​</a></h2><p>PR review is a bottleneck: reviewer availability and consistency vary; PHP 8.x and WP/Laravel deprecations can be missed. Team needs a first-pass that summarises diffs, flags obvious issues and deprecations, without replacing human judgment or merge authority.</p><h2 id="_2-ai-opportunity" tabindex="-1">2. AI Opportunity <a class="header-anchor" href="#_2-ai-opportunity" aria-label="Permalink to &quot;2. AI Opportunity&quot;">​</a></h2><p>A PR bot (Bionic) receives the diff (and minimal context) and posts comments: summary, security/breaking hints, optional PHP 8.x/WP deprecation flags. Human reviewer still approves and merges; merge never depends on the bot. At £200, only Bionic (OSS or free tier) is used; CodeRabbit is excluded.</p><h2 id="_3-proposed-architecture" tabindex="-1">3. Proposed Architecture <a class="header-anchor" href="#_3-proposed-architecture" aria-label="Permalink to &quot;3. Proposed Architecture&quot;">​</a></h2>',6)),(t(),l(p,null,{default:i(()=>[c(a,{id:"mermaid-18",class:"mermaid",graph:"sequenceDiagram%0A%20%20participant%20Dev%20as%20Developer%0A%20%20participant%20GH%20as%20GitHub%0A%20%20participant%20CI%20as%20GitHub%20Actions%0A%20%20participant%20Bot%20as%20Bionic%0A%20%20participant%20Human%20as%20Reviewer%0A%20%20Dev-%3E%3EGH%3A%20Push%20branch%2C%20open%20PR%0A%20%20GH-%3E%3ECI%3A%20Trigger%20PHPStan%2C%20Rector%2C%20tests%0A%20%20GH-%3E%3EBot%3A%20Webhook%20(diff%20only)%0A%20%20Bot-%3E%3EGH%3A%20Post%20comments%20(no%20merge)%0A%20%20CI-%3E%3EGH%3A%20pass%2Ffail%0A%20%20Human-%3E%3EGH%3A%20Review%2C%20approve%2C%20merge%0A"})]),fallback:i(()=>[...e[0]||(e[0]=[d(" Loading... ",-1)])]),_:1})),e[2]||(e[2]=o('<h2 id="_4-tooling-options-oss-vs-saas" tabindex="-1">4. Tooling Options (OSS vs SaaS) <a class="header-anchor" href="#_4-tooling-options-oss-vs-saas" aria-label="Permalink to &quot;4. Tooling Options (OSS vs SaaS)&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Option</th><th>Tool</th><th>Pilot choice</th><th>Note</th></tr></thead><tbody><tr><td>OSS</td><td>Bionic (GitHub App)</td><td><strong>Yes</strong></td><td>OSS or free tier; diff-only; 30k tokens/PR cap.</td></tr><tr><td>SaaS</td><td>CodeRabbit</td><td>No at £200</td><td>Allowed only if budget is £500 and cost controlled.</td></tr></tbody></table><p>Cursor is not used for &quot;review entire PR&quot; in pipeline; that is the bot&#39;s role. Local Cursor remains for completion and ad-hoc explain/refactor.</p><h2 id="_5-guardrails-controls" tabindex="-1">5. Guardrails &amp; Controls <a class="header-anchor" href="#_5-guardrails-controls" aria-label="Permalink to &quot;5. Guardrails &amp; Controls&quot;">​</a></h2><ul><li><strong>Input:</strong> Bot receives diff only (or diff + minimal context). No <code>.env</code>, <code>wp-config</code>, or credentials in paths. Max 30k tokens per PR (Cost Governor).</li><li><strong>Redaction:</strong> PR title/description and branch name must not contain client names, production URLs, API keys, or PII. PR template checklist: &quot;I confirm no client names, URLs, credentials, or PII in this PR.&quot;</li><li><strong>Merge:</strong> Bot has no merge rights. Branch protection: CI pass + human review required.</li><li><strong>Audit:</strong> &quot;AI-assisted review: yes&quot; in PR template or label. Optional: log PR numbers that received bot comments.</li><li><strong>Rate limit:</strong> 15 PRs per repo per week (Cost Governor at £200).</li></ul><h2 id="_6-failure-modes" tabindex="-1">6. Failure Modes <a class="header-anchor" href="#_6-failure-modes" aria-label="Permalink to &quot;6. Failure Modes&quot;">​</a></h2><ul><li><strong>Noisy or wrong suggestions:</strong> Conservative config; tune or disable categories; 2-week feedback loop. Allow disable per repo.</li><li><strong>Bot down or rate-limited:</strong> Human review continues; merge still gated on CI + human. No dependency on bot for merge (DevOps).</li><li><strong>Client data in diff:</strong> Stop condition: immediate disable and review; redaction policy and training to prevent.</li></ul><h2 id="_7-kpis" tabindex="-1">7. KPIs <a class="header-anchor" href="#_7-kpis" aria-label="Permalink to &quot;7. KPIs&quot;">​</a></h2><ul><li><strong>PR cycle time:</strong> ≥15% reduction for PRs with bot comment vs without (same repo, median open→merge). Most attributable KPI (Critic).</li><li><strong>Regression rate:</strong> No increase vs baseline (post-merge defect/revert rate).</li></ul><h2 id="_8-actionable-next-steps" tabindex="-1">8. Actionable Next Steps <a class="header-anchor" href="#_8-actionable-next-steps" aria-label="Permalink to &quot;8. Actionable Next Steps&quot;">​</a></h2><ol><li>Install Bionic on pilot repo (OSS or free tier); no merge rights (DevOps/Lead).</li><li>Set bot config: diff-only, max 30k tokens/PR.</li><li>Add PR template with &quot;AI-assisted review: yes/no&quot; and redaction checklist.</li><li>Document data policy in repo (README or CONTRIBUTING).</li><li>After 8 weeks: team vote on usefulness; if &lt;30% find helpful, pause or reconfigure (stop condition).</li></ol>',11))])}const _=r(u,[["render",m]]);export{A as __pageData,_ as default};
